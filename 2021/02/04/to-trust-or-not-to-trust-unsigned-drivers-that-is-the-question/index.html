<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=keyword content="ConfigMgr Microsoft Intune Windows WinAdmins">
<meta name=viewport content="width=device-width">
<meta name=description content="A community blog and subsidiary of WinAdmins.io">
<link rel="shortcut icon" href=/img/favicon.ico>
<title>To Trust Or Not To Trust (UNSIGNED DRIVERS): That Is The Question-SysManSquad | Systems Management Squad</title>
<link rel=canonical href=/2021/02/04/to-trust-or-not-to-trust-unsigned-drivers-that-is-the-question/>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=https://blog.sysmansquad.com/css/custom.css>
<script src=https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js></script>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js></script>
<script src=https://blog.sysmansquad.com/js/jquery.slicknav.js></script>
<script src=https://blog.sysmansquad.com/js/asd_SlickNav_Mobile.js></script>
<script src=https://blog.sysmansquad.com/js/custom.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXZR1RSQYX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-XXZR1RSQYX',{anonymize_ip:!1})}</script>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.sysmansquad.com/83">
<meta name=twitter:title content="To Trust Or Not To Trust (UNSIGNED DRIVERS): That Is The Question">
<meta name=twitter:description content="This post is intended to help others who might want to better understand why their Operating System Deployment (OSD) task sequence (TS) is failing during the Setup Windows and Configuration Manager step with an error code of 0x80004005 and how to identify the unsigned drivers in your driver package that might be causing it. Maybe my google-fu was failing me, but I didn&rsquo;t see anything else out there that was a guided tour with pictures through the old Microsoft article on this issue.">
</head>
<body class="home blog">
<div id=asd-container>
<div id=top-bar>
<div class=container>
<div id=nav-wrapper>
<ul class=menu id=menu-top-menu>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/>Home</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/about/>
<span>About</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=https://github.com/SysManSquad>
<span>GitHub</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/jointhesquad/>
<span>Join the Squad</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/meetthesquad/>
<span>Meet the Squad</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=#>
<span>MORE></span>
</a>
<ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/contact/>Contact</a>
</li>
</ul>
</li>
</ul>
</div>
<div id=top-search>
<a href=# class=search><i class="fa fa-search"></i></a>
<div class=show-search>
<form role=search method=get action=https://www.google.com/search id=searchform>
<input type=search placeholder="Search and hit enter..." name=q id=q title="Search and hit enter...">
<input type=hidden name=sitesearch value=https://blog.sysmansquad.com>
<button type=submit value=Search>
</form>
</div>
</div>
<div class=menu id=menu-mobile></div>
</div>
</div>
<header id=header class=noslider>
<div class=container>
<div id=logo>
<h1><a href=https://blog.sysmansquad.com><img src=/img/SysManSquad-HorizontalColor-Logo.png alt="Systems Management Squad"></a></h1>
</div>
</div>
</header>
<div class=container>
<div id=content>
<div id=main class=fullwidth>
<article class="post type-post status-publish format-standard has-post-thumbnail hentry">
<div class=post-header>
<h1>To Trust Or Not To Trust (UNSIGNED DRIVERS): That Is The Question</h1>
<span class=post-date>February 4, 2020</span>
</div>
<div class=post-entry>
<p>This post is intended to help others who might want to better understand why their Operating System Deployment (OSD) task sequence (TS) is failing during the <strong>Setup Windows and Configuration Manager</strong> step with an error code of <strong><a href=https://twitter.com/TheNotoriousDRR/status/1163132463843106818>0x80004005</a></strong> and how to identify the unsigned drivers in your driver package that might be causing it. Maybe my google-fu was failing me, but I didn&rsquo;t see anything else out there that was a guided tour with pictures through the old <a href=https://support.microsoft.com/en-us/help/2012889/configmgr-2007-windows-setup-fails-when-installing-drivers-during-an-c>Microsoft article</a> on this issue. Admit it - sometimes picture guides are just easier, especially if you can pass the task <em>present a growth opportunity</em> to a junior member of your team.</p>
<blockquote>
<p><em>YES - Before you mention it - I recognize that I should be using <a href=https://github.com/AdamGrossTX/PowershellScripts/tree/master/ConfigMgr/BootImage>DART</a> in my boot image so I can capture screenshots and not have to crop cell phone pictures, but I just haven&rsquo;t yet and I wanted to get this process documented</em>&mldr;<br>
<a href=http://www.ravishly.com/you-arent-lazy-youre-just-terrified-paralysis-and-perfectionism-mental-health><div class=image>
<figure>
<a href=OCDame_Am-I-Crazy_002.png target=_blank>
<img src=OCDame_Am-I-Crazy_002.png alt>
</a>
</figure>
</div></a></p>
<p><em><a href=http://www.ravishly.com/you-arent-lazy-youre-just-terrified-paralysis-and-perfectionism-mental-health>If I wait for perfectionism, then my procrastination and paralysis will kick in.</a></em></p>
<p><em>I reserve the right to revisit the post and replace images in the future.</em> </p>
</blockquote>
<h2 id=the-error>The Error&mldr;</h2>
<p>Okay &mldr; your OSD task sequence just failed and the timer is started. You have 15 minutes, by default, to read the logs and find the bad driver before all of the OEM inf files are wiped from the x: drive! You could always click the link in the image caption below and learn how to extend the default timeout (courtesy of <a href=https://twitter.com/AArwidmark>Ami Arwidmark</a>), but where is the fun in that?! </p>
<p><a href=osd-fail-01-obs.png><div class=image>
<figure>
<a href=osd-fail-01-obs-1024x570.png target=_blank>
<img src=osd-fail-01-obs-1024x570.png alt>
</a>
</figure>
</div></a> <em>&ldquo;Hey Chris, you know you can <a href=https://deploymentresearch.com/extend-the-configmgr-task-sequence-error-dialogue-timeout/>Extend the ConfigMgr Task Sequence Error Dialogue Timeout</a>, right?"</em><br>
<strong>Ooh, shiny! I should do that!</strong></p>
<h2 id=ready-set-go>Ready, Set, Go!</h2>
<ul>
<li>You&rsquo;ll want to quickly open the Windows Setup logs from <strong>x:\windows\panther\setupact.log</strong>.</li>
</ul>
<p><a href=osd-fail-02-obs.png><div class=image>
<figure>
<a href=osd-fail-02-obs-1024x571.png target=_blank>
<img src=osd-fail-02-obs-1024x571.png alt>
</a>
</figure>
</div></a> This whole post is under the assumption that your boot image has <a href=https://docs.microsoft.com/en-us/configmgr/osd/get-started/manage-boot-images>command support</a> enabled so that you can access the command prompt and run <strong>CMTrace.exe</strong>. </p>
<ul>
<li>Now, you&rsquo;ll want to scroll through the <strong>x:\windows\panther\setupact.log</strong> file until you reach the red section and a white line saying <em>&ldquo;Windows Setup could not install one or more boot-critical drivers&rdquo;</em> and right above that you will see the last driver that Window Setup was trying to install. In this case it was <strong>X:\WINDOWS\INF\oem184.inf</strong>.</li>
</ul>
<p><a href=osd-fail-03-obs.png><div class=image>
<figure>
<a href=osd-fail-03-obs-1024x589.png target=_blank>
<img src=osd-fail-03-obs-1024x589.png alt>
</a>
</figure>
</div></a><em>Stupid oem184.inf wasting my time&mldr;</em></p>
<ul>
<li>Sweet! <strong>CTRL-O</strong> and type that path of <strong>X:\WINDOWS\INF\oem184.inf</strong> (using whatever oemxxx.inf file you found in your situation) to open the driver inf file and figure out what is causing you to go through this trouble&mldr; </li>
</ul>
<p><a href=osd-fail-04-obs.png><div class=image>
<figure>
<a href=osd-fail-04-obs-1024x604.png target=_blank>
<img src=osd-fail-04-obs-1024x604.png alt>
</a>
</figure>
</div></a></p>
<ul>
<li>Now you could look for the driver name, but I&rsquo;ve had the most luck looking for the <strong>DriverVer</strong> and in this case I was looking at a problem driver with a version of <strong>8.3.1027.5567</strong>. Off to the #MEMCM console so we can yank this thing out of the driver package&mldr;</li>
</ul>
<p><a href=osd-fail-05-obs.png><div class=image>
<figure>
<a href=osd-fail-05-obs-1024x725.png target=_blank>
<img src=osd-fail-05-obs-1024x725.png alt>
</a>
</figure>
</div></a></p>
<h2 id=to-the-console>To The Console!</h2>
<p><a href=driver-removal-04-obs-1.png><div class=image>
<figure>
<a href=driver-removal-04-obs-1.png target=_blank>
<img src=driver-removal-04-obs-1.png alt>
</a>
</figure>
</div></a></p>
<p><a href=driver-removal-05-1.png><div class=image>
<figure>
<a href=driver-removal-05-1.png target=_blank>
<img src=driver-removal-05-1.png alt>
</a>
</figure>
</div></a></p>
<h2 id=woot---we-can-image-again>Woot - We Can Image Again!</h2>
<p>Now &mldr; I was already planning this post in my head - I had all the screenshots, but hadn&rsquo;t made time to put it all together - then my friend <a href=https://twitter.com/SCCMF12TWICE>Chris Buck</a> who runs <a href=https://sccmf12twice.com/our-blog/>https://sccmf12twice.com/our-blog/</a> (<em>go check out all the cool things our community is sharing!</em>) made this comment below on Twitter and I felt compelled to get this out before I lose my enthusiasm. This post is out later than I planned, but Cub Scout Pinewood Derby and Blue & Gold prep took priority. Speaking of which &mldr; I love my new Leader and his analytical mind (<a href=https://www.joshuastevens.net/blog/pinewood-nerdy-statistics/>https://www.joshuastevens.net/blog/pinewood-nerdy-statistics/</a>)!</p>
<p><a href=https://twitter.com/SCCMF12TWICE/status/1207736790804783104><div class=image>
<figure>
<a href=chris-buck-drivers.png target=_blank>
<img src=chris-buck-drivers.png alt>
</a>
</figure>
</div></a></p>
<p>There are many different ways that people choose to handle drivers - like standard packages as Chris Buck mentions and we see examples of that in <a href=https://twitter.com/miketerrill>Mike Terrill</a>&rsquo;s <strong><a href=https://miketerrill.net/2017/09/10/configuration-manager-dynamic-drivers-bios-management-with-total-control-part-1/>Dynamic Drivers and BIOS Management</a></strong> solution and then there is <a href=https://twitter.com/modaly_it>Maurice Daly</a> and <a href=https://twitter.com/NickolajA>Nickolaj Andersen</a>&rsquo;s <strong><a href=https://www.scconfigmgr.com/modern-driver-management/>Modern Driver Management</a></strong> solution which is what I&rsquo;m working toward. There is also a very vocal person in the <a href=https://www.winadmins.chat/>#WinAdmins</a> discord that insists Auto Apply is the only way to go, but I still have little trust. Do what works well for you and your organization.</p>
<p>Personally, I work in K-12 public education and in particular my organization currently has contracts to support several other local school districts for full IT services. With this comes the challenge of what many private sector admins take for granted &mldr; this mythical creature I&rsquo;ve heard people refer to as &ldquo;standardization&rdquo; and &ldquo;lifecycle replacement&rdquo;. That&rsquo;s why I created &mldr; <a href=http://tiny.cc/WhyIDrink>http://tiny.cc/WhyIDrink</a> and went and used <a href=https://twitter.com/Ebag333>Ebag333</a>&rsquo;s <a href=https://github.com/winadminsdotorg/SystemCenterConfigMgr/blob/master/Scripts/Drivers/BurnDriverDatabaseWithFire.ps1>BurnDriverDatabaseWithFire</a> script out of the <a href=https://www.winadmins.chat/>#WinAdmins</a> community <a href=https://github.com/winadminsdotorg/SystemCenterConfigMgr/>github repo</a> to start fresh. If someone needs to image a machine we will evaluate if it still is of value to the schools and add drivers back as appropriate. I&rsquo;m hoping this will allow me to focus on only doing &lsquo;modern management&rsquo; on models that are necessary.</p>
<p>In the words of, newly minted MVP, <a href=https://twitter.com/bdam555>Bryan Dam</a> - &ldquo;<a href=https://damgoodadmin.com/2017/11/05/fully-automate-software-update-maintenance-in-cm/>If I was a better person&mldr;</a>&rdquo; and had a <em><strong>growth mindset</strong></em> (<em>my sons 5th grade teacher would be so happy to hear me parroting her words</em>) I would like to believe I may revisit this at some point to understand if these drivers are necessary or not. The realist inside tells me I probably won&rsquo;t though. In our testing it appears the devices work just fine and no drivers are reported missing in Device Manager. Good enough for now, we have tons of other work to get to. If we start receiving a spike in tickets for a particular model I can at least look at that list of disabled drivers to look for an OEM version. Sometimes that has to be enough, but I would love to get better and welcome any feedback on process improvement through email or Twitter. I hope this is helpful to someone in the future.</p>
<p>-Chris (<a href=https://twitter.com/AutomateMyStuff>@AutomateMyStuff</a>)</p>
</div>
<comments id=comments>
<script src=https://utteranc.es/client.js repo=SysManSquad/sysmansquadblog issue-term=title label="blog comment" theme=github-light crossorigin=anonymous async></script>
</comments>
</article>
</div>
</div>
</div>
<footer id=footer>
<div class=container>
<div id=footer-copyright>
<p class=copyright>&copy; 2021 WinAdmins - https://blog.sysmansquad.com - Systems Management Squad</a></p>
</div>
</div>
</footer>
</div>
</body>
</html>